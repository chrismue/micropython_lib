<!DOCTYPE html>

<html>

    <head>
        <meta charset="utf-8" />
        <title>PyBoard Accelerator Demo</title>
		<style>
            :root {
              --led-color: coral;
            }
            .rTable { display: table; width: 100%; height: 100%;}
			.rTableRow { display: table-row; }
			.rTableCell { display: table-cell; border:10px solid #000; border-radius:100%; background-color: var(--led-color);}
			html, body {height: 100%; margin: 0; background:black;}
		</style>
    </head>

    <script language="javascript">
        function init()
        {
            pollWebSocket();
        }

        function pollWebSocket()
        {
            var wsUri           = "ws://" + window.location.hostname;
            websocket           = new WebSocket(wsUri);
            websocket.onopen    = function(evt) { onOpen    (evt) };
            websocket.onclose   = function(evt) { onClose   (evt) };
            websocket.onmessage = function(evt) { onMessage (evt) };
            websocket.onerror   = function(evt) { onError   (evt) };
        }

        function onOpen(evt)
        {
			var intervalID = setInterval(function(){websocket.send("get");}, 100);
        }

        function onClose(evt)
        {
            console.log("DISCONNECTED");
        }

        function onMessage(evt)
        {
			console.log("rgb("+ evt.data + ")")
			document.documentElement.style.setProperty('--led-color', "rgb("+ evt.data + ")");
        }

        function onError(evt)
        {
			console.log('ERROR: ' + evt.data);
        }

        window.addEventListener("load", init, false);
    </script>

	<body>
		<div class="rTable">
			<div class="rTableRow">
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
			</div>
			<div class="rTableRow">
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
			</div>
			<div class="rTableRow">
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
			</div>
			<div class="rTableRow">
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
			</div>
			<div class="rTableRow">
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
			</div>
			<div class="rTableRow">
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
				<div class="rTableCell"></div>
			</div>
		</div>
	</body>

</html>